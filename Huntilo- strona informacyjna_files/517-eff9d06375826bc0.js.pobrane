"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{9710:function(e,t,n){var r=n(8788),o=n(930),i=n(5163);t.Z=function(e){var t=e.query,n=e.queryFn,a=e.transformResponse;return(0,r.Z)((function(){var e,r,s,l,u=arguments;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:for(e=u.length,r=new Array(e),s=0;s<e;s++)r[s]=u[s];return[4,n(t.apply(void 0,(0,o.Z)(r)))];case 1:return l=i.sent(),"function"===typeof a?[2,a(l)]:[2,l]}}))}))}},599:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(8788),o=n(7328),i=n(6297),a=n(5163),s=n(162),l=n(3945);function u(e){var t=e.baseUrl;return function(){var e=(0,r.Z)((function(e){var n,r,u,d,p,f,y,E,A,v,_,h;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=e.body,r=e.headers,u=(0,i.Z)(e,["body","headers"]),a.label=1;case 1:return a.trys.push([1,3,,4]),d=Object.assign({"Content-Type":"application/json"},r),[4,s.Z.post(t,n,(0,o.Z)({headers:d},u))];case 2:return p=a.sent(),f=p.data,y=f.data,E=f.errors,A={data:y},E&&(A.errors=(0,l.I)(E[0])),[2,A];case 3:return v=a.sent(),h=(null===(_=v.response)||void 0===_?void 0:_.status)||500,console.log({error:v}),[2,{data:null,errors:[c({code:h,message:v.message})]}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()}function c(e){var t=e.message,n=e.code;return{message:"Internal Server Error",extensions:{message:t,error:!0,code:String(n)}}}s.Z.defaults.timeout=3e4},3517:function(e,t,n){n.d(t,{vb:function(){return T},aC:function(){return L},NG:function(){return Y},Cx:function(){return I},aU:function(){return P},iM:function(){return C},Io:function(){return w}});var r=n(7328),o=n(6670),i=n(2784),a=n(5632),s=n.n(a),l=n(6826),u=n(2350),c=n(5830),d=n(8943),p=n(6297),f=n(6383),y=n(4029),E=n(4701),A=n(9710),v=n(4409),_=(0,n(599).Z)({baseUrl:v.j?E.Bp.NEXT_API_PATH:E.Bp.API_URL}),h=(0,A.Z)({queryFn:_,query:function(e){var t={queryName:"refreshToken",args:{siteId:{value:e.siteId,type:"ID"},ownerId:{value:e.ownerId,type:"ID!"},platform:{value:"cms",type:"Platform"}},select:"token expiresAt success message user { id email role name}"};return{body:(0,y.Z)(t,!0)}},transformResponse:function(e){var t=(0,r.Z)({},e);return e.data&&(t.data=e.data.refreshToken),t}}),N=(0,A.Z)({queryFn:_,query:function(e){var t={queryName:"acceptInvitation",args:{token:{value:e,type:"String!"}},select:"user { id email role name } token message success expiresAt"};return{body:(0,y.Z)(t,!0)}},transformResponse:function(e){var t=(0,r.Z)({},e);return e.data&&(t.data=e.data.acceptInvitation),t}}),g=(0,A.Z)({queryFn:_,query:function(e){var t={queryName:"loginWith",args:{siteId:{type:"ID!",value:e.siteId},provider:{type:"String",value:e.provider},platform:{type:"Platform!",value:"cms"},passthrough:{type:"String",value:e.passthrough},ownerId:{type:"ID!",value:e.ownerId},source:{type:"SourceEnum",value:"PORTAL"}},select:"user {id email role name} token message success expiresAt"};return{body:(0,y.Z)(t,!0)}},transformResponse:function(e){var t=(0,r.Z)({},e);return e.data&&(t.data=e.data.loginWith),t}}),m=(0,A.Z)({queryFn:_,query:function(e){var t=e.queryKey,n=(0,f.Z)(t,2),r=n[0],o=n[1],i=o.siteId,a=o.redirectTo,s=o.domain,l=o.tempUser,u=o.email,c=o.siteType,d={queryName:r,args:{siteId:{type:"ID!",value:i},email:{type:"String!",value:u},domain:{type:"String!",value:s},platform:{type:"Platform!",value:"cms"},passthrough:{type:"String",value:o.passthrough},isCustomDomain:{type:"Boolean",value:!1},siteType:{type:"String!",value:c},redirectTo:{type:"String",value:a},user:{type:"TempUserInput",value:l},source:{type:"SourceEnum",value:"PORTAL"}},select:"status message success"};return{body:(0,y.Z)(d)}},transformResponse:function(e){var t=(0,r.Z)({},e);return e.data&&(t.data=e.data.sendMagicLink),t}}),S=(0,A.Z)({queryFn:_,query:function(){return{body:(0,y.Z)({queryName:"logout",args:{}},!0)}}}),R=(0,A.Z)({queryFn:_,query:function(e){var t=e.id,n=e.token,r={queryName:"updateUser",args:{id:{type:"ID!",value:t},updateUserInput:{type:"UpdateUserInput",value:(0,p.Z)(e,["id","token"])}},select:"user {name email id} token expiresAt message success"};return{body:(0,y.Z)(r,!0),headers:{authorization:"Bearer ".concat(n)}}},transformResponse:function(e){var t=(0,r.Z)({},e);return e.data&&(t.data=e.data.updateUser),t}}),b=(0,A.Z)({queryFn:_,query:function(e){var t=e.queryKey,n=(0,f.Z)(t,2),r={queryName:n[0],args:{owner:{type:"ID!",value:n[1].id}},select:"isFreeUser"};return{body:(0,y.Z)(r)}},transformResponse:function(e){var t=(0,r.Z)({},e);return e.data&&(t.data=e.data.getUserStatsPublic),t}}),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,u.D)(g,{onSuccess:function(n){var r=n.data;(null===r||void 0===r?void 0:r.success)&&(e.setQueryData(["auth"],r),localStorage.setItem("authData",JSON.stringify(r)),s().push("".concat(location.origin).concat(t)))}})},T=function(){var e=(0,c.NL)();return(0,u.D)(N,{onSuccess:function(t){var n=t.data;(null===n||void 0===n?void 0:n.success)&&(e.setQueryData(["auth"],n),localStorage.setItem("authData",JSON.stringify(n)))}})},O=function(e){return(0,u.D)(h,{onSuccess:function(t){var n=t.data;(null===n||void 0===n?void 0:n.success)?(localStorage.setItem("authData",JSON.stringify(n)),e.setQueryData(["auth"],n)):(localStorage.removeItem("authData"),e.setQueryData(["auth"],{}))}})},C=function(e){return(0,d.a)(["sendMagicLink",e],m,{enabled:!1,onSuccess:function(e){var t=e.data,n=document.querySelector(".magic-link-response");if(n){var r=(null===t||void 0===t?void 0:t.success)?"green":"red";n.style.color=r,n.textContent=null===t||void 0===t?void 0:t.message}}})},L=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.skip,s=void 0!==a&&a,u=(0,c.NL)(),d=u.getQueryData(["auth"]),p=O(u),f=p.mutate,y=p.isLoading,E=(0,l.W)(),A=E.data,v=E.isLoading,_=null===A||void 0===A||null===(e=A.data)||void 0===e?void 0:e.id,h=null===A||void 0===A||null===(t=A.data)||void 0===t?void 0:t.owner,N=!!(null===d||void 0===d?void 0:d.user),g=!(null===d||void 0===d?void 0:d.expiresAt)||1e3*d.expiresAt<Date.now();return(0,i.useEffect)((function(){!s&&N&&g&&_&&h&&f({siteId:_,ownerId:h})}),[g,f,_,s,N,h]),(0,i.useEffect)((function(){u.setQueryData(["auth"],JSON.parse(localStorage.getItem("authData")||"{}"))}),[]),(0,o.Z)((0,r.Z)({isTokenExpired:g,isAuth:!!(null===d||void 0===d?void 0:d.success)},d),{isLoading:v||y})},P=function(e){return(0,u.D)(S,{onSuccess:function(t){e.invalidateQueries(["getUserMembership"]),t&&(e.setQueryData(["auth"],{}),localStorage.removeItem("authData"))}})},w=function(e){return(0,u.D)(R,{onSuccess:function(t){var n=t.data;n.success&&(e.setQueryData(["auth"],n),s().push("#"))}})},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.a)(["getUserStatsPublic",e],b,{enabled:!!(null===e||void 0===e?void 0:e.id)})}},6826:function(e,t,n){n.d(t,{W:function(){return A}});var r=n(5632),o=n(1856),i=n(5830),a=n(8943),s=n(7328),l=n(6383),u=n(4029),c=n(4701),d=n(9710),p=n(4409),f=(0,n(599).Z)({baseUrl:p.j?c.Rm.NEXT_API_PATH:c.Rm.API_URL}),y=(0,d.Z)({queryFn:f,query:function(e){var t=e.queryKey,n=(0,l.Z)(t,2),r=n[0],o=n[1],i=o.domain,a=o.customDomain,s=o.select,c=void 0===s?"":s;return{body:(0,u.Z)({queryName:r,select:"id status name domain owner domainType dorikSitePrefix postSlug categorySlug siteType globalStyle isURLRedirectEnabled isAnalyticsEnabled analyticsSiteId owner "+c,args:{domain:{value:i,type:"String!"},customDomain:{value:a,type:"Boolean!"}}})}},transformResponse:function(e){var t=(0,s.Z)({},e);return e.data&&(t.data=e.data.getSiteByDomain),t}}),E=(0,o.e)("production"),A=function(e,t){var n=(0,i.NL)(),s=(0,r.useRouter)().query.domain||c._o;o.jU&&(s&&window.localStorage.setItem("__SIMULATE_DOMAIN",s),s=window.localStorage.getItem("__SIMULATE_DOMAIN")),e=o.jU?window.location.host:n.getQueryData(["host"]);var l=E.resolveHost(e||"",s),u=l.domain,d=l.isCustomDomain;return(0,a.a)(["getSiteByDomain",{domain:u,customDomain:d,select:t}],y)}},3945:function(e,t,n){n.d(t,{I:function(){return i}});var r=n(7328),o=n(930),i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t.apply(void 0,(0,o.Z)(e))}),[e])}}((function(e){var t=e.code,n=e.extensions;return[{message:e.message,extensions:(0,r.Z)({code:t},n)}]}),(function(e){var t=e.extensions,n=e.message;return[{extensions:(0,r.Z)({message:n},t)}]}),(function(e){var t=e.extensions,n=t.code,r=t.message,o=r;return 422===Number(n)&&"[object Object]"===Object.prototype.toString.call(r)&&(o=Object.values(r).join(",")),[{extensions:{code:n,message:{401:r,404:r,500:r,422:o,BAD_USER_INPUT:"Input is not valid",INTERNAL_SERVER_ERROR:"Internal Server Error"}[n]}}]}))},1856:function(e,t,n){n.d(t,{e:function(){return i},jU:function(){return r}});const r=typeof window<"u",o={test:{AGENCY:"cmsfly.com",LTD_AGENCY:"cmsfly.com",REGULAR:"dcms.site",REGULAR_LEGACY:"read.gd"},production:{AGENCY:"cmsfly.com",LTD_AGENCY:"cmsfly.com",REGULAR:"dcms.site",REGULAR_LEGACY:"read.gd"},development:{AGENCY:"agency.dorik.autos",LTD_AGENCY:"agency.dorik.autos",REGULAR:"dorik.autos",REGULAR_LEGACY:"dorik.autos"},staging:{AGENCY:"agency.dorikio.com",LTD_AGENCY:"agency.dorikio.com",REGULAR:"dorikio.com",REGULAR_LEGACY:"dorikio.com"},getAll:function(e){return Object.values(e)}},i=e=>{const{AGENCY:t,REGULAR:n,REGULAR_LEGACY:r,LTD_AGENCY:i}=o[e];return{AGENCY:t,REGULAR:n,LTD_AGENCY:i,REGULAR_LEGACY:r,resolveHost:(e,o="localhost:3000")=>{e=e.includes("localhost")?o:e;const a=[t,n,r].join("|"),s=new RegExp(`\\.(${a})$`),l=s.test(e);return{domain:l?e.replace(s,""):e,shouldResolveSite:n=>{const r={AGENCY:e.includes(t),REGULAR:!e.includes(t),LTD_AGENCY:e.includes(i)};return!l||r[n]},isCustomDomain:!l}}}},a=Object.freeze({owner:"owner",admin:"admin",author:"author",editor:"editor",sysAdmin:"sys_admin",developer:"developer",superUser:"super_user",publicApi:"public_api",subscriber:"subscriber",sysReviewer:"sys_reviewer"}),s=Object.freeze({TAG:"TAG",SITE:"SITE",POST:"POST",PAGE:"PAGE",THEME:"THEME",TOPIC:"TOPIC",API_KEY:"API_KEY",SITEMAP:"SITEMAP",LICENSE:"LICENSE",PAYMENT:"PAYMENT",CAMPAIGN:"CAMPAIGN",CATEGORY:"CATEGORY",RE_INDEX:"RE_INDEX",USER_META:"USER_META",All_SITES:"All_SITES",PUBLIC_API:"PUBLIC_API",MEMBERSHIP:"MEMBERSHIP",WEBHOOK_URL:"WEBHOOK_URL",CUSTOM_ROLE:"CUSTOM_ROLE",URL_REDIRECT:"URL_REDIRECT",ACTIVITY_LOG:"ACTIVITY_LOG",AGENCY_CONFIG:"AGENCY_CONFIG",MEDIA_LIBRARY:"MEDIA_LIBRARY",PRESIGNED_URL:"PRESIGNED_URL",CLIENT_BILLING:"CLIENT_BILLING",PUBLIC_API_KEY:"PUBLIC_API_KEY"}),l=Object.freeze({EXPORT_JSON:"EXPORT_JSON",INVITE_USER:"INVITE_USER",SITE_LIMITS:"SITE_LIMITS"});a.sysAdmin,a.sysReviewer;var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{},c={exports:{}},d={},p={},f={},y={},E=u&&u.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(y,"__esModule",{value:!0});var A=function(e){function t(n){void 0===n&&(n="");var r=e.call(this,n)||this;return r.message=n,r.name="AccessControlError",Object.setPrototypeOf(r,t.prototype),r}return E(t,e),t}(Error);y.AccessControlError=A;var v={},_={},h={};Object.defineProperty(h,"__esModule",{value:!0});h.Action={CREATE:"create",READ:"read",UPDATE:"update",DELETE:"delete"};var N={};Object.defineProperty(N,"__esModule",{value:!0});N.Possession={OWN:"own",ANY:"any"},Object.defineProperty(_,"__esModule",{value:!0});var g=h;_.Action=g.Action;var m=N;_.Possession=m.Possession;var S=Object.keys(g.Action).map((function(e){return g.Action[e]}));_.actions=S;var R=Object.keys(m.Possession).map((function(e){return m.Possession[e]}));_.possessions=R;var b={},I={exports:{}};typeof self<"u"&&self,I.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=2)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype.toString,o={isObject:function(e){return"[object Object]"===r.call(e)},isArray:function(e){return"[object Array]"===r.call(e)},ensureArray:function(e){return o.isArray(e)?e:null==e?[]:[e]},hasOwn:function(e,t){return e&&"function"==typeof e.hasOwnProperty&&e.hasOwnProperty(t)},deepCopy:function(e){if(!o.isObject(e))return e;var t=void 0,n=void 0,r={};for(t in e)o.hasOwn(e,t)&&(n=e[t],r[t]=o.isObject(n)?o.deepCopy(n):n);return r},each:function(e,t,n){for(var r=e.length,o=-1;++o<r&&!1!==t.call(n,e[o],o,e););},eachRight:function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););},pregQuote:function(e,t){return String(e).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},stringOrArrayOf:function(e,t){return"string"==typeof e&&e===t||o.isArray(e)&&1===e.length&&e[0]===t},hasSingleItemOf:function(e,t){return 1===e.length&&(2!==arguments.length||e[0]===t)}};t.default=o},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,Object.defineProperty(n,"name",{enumerable:!1,writable:!1,value:"NotationError"}),Object.defineProperty(n,"message",{enumerable:!1,writable:!0,value:e}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(n,n.constructor):Object.defineProperty(n,"stack",{enumerable:!1,writable:!1,value:new Error(e).stack}),n}return i(t,Error),t}();t.default=a},function(e,t,n){var r,o=n(3),i=(r=o)&&r.__esModule?r:{default:r};e.exports=i.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(n(0)),s=r(n(4)),l=r(n(1)),u={SOURCE:"Invalid source object.",DEST:"Invalid destination object.",NOTATION:"Invalid notation: ",NOTA_OBJ:"Invalid notations object: "},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,e),!a.default.isObject(t))throw new l.default(u.SOURCE);this._source=t}return i(e,[{key:"each",value:function(t){var n=this,r=this._source,o=Object.keys(r);a.default.each(o,(function(o,i,s){var l=r[o],u=void 0;a.default.isObject(l)?(u=new e(l)).each((function(e,n,i,a){var s=o+"."+e;t.call(u,s,n,i,r)})):t.call(n,o,o,l,r)}))}},{key:"eachKey",value:function(e){return this.each(e)}},{key:"eachValue",value:function(t,n){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");var r=this._source;e.eachNote(t,(function(e,t,o,i){if(r=a.default.hasOwn(r,t)?r[t]:void 0,!1===n(r,e,t,o,i))return!1}))}},{key:"getNotations",value:function(){var e=[];return this.each((function(t,n,r,o){e.push(t)})),e}},{key:"flatten",value:function(){var e={};return this.each((function(t,n,r,o){e[t]=r})),this._source=e,this}},{key:"expand",value:function(){return this._source=e.create({}).merge(this._source).value,this}},{key:"aggregate",value:function(){return this.expand()}},{key:"inspect",value:function(t){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");var n=this._source,r={has:!1,value:void 0};return e.eachNote(t,(function(e,t,o,i){if(!a.default.hasOwn(n,t))return r={has:!1,value:void 0},!1;n=n[t],r={has:!0,value:n}})),r}},{key:"inspectRemove",value:function(t){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");var n=void 0,r=void 0;if(t.indexOf(".")<0)r=t,n=this._source;else{var o=e.parent(t);r=e.last(t),n=this.inspect(o).value}var i=void 0;return a.default.hasOwn(n,r)?(i={has:!0,value:n[r]},delete n[r]):i={has:!1,value:void 0},i}},{key:"has",value:function(e){return this.inspect(e).has}},{key:"hasDefined",value:function(e){return void 0!==this.inspect(e).value}},{key:"get",value:function(e,t){var n=this.inspect(e);return n.has?n.value:t}},{key:"set",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");var o=this._source,i=void 0;return e.eachNote(t,(function(e,t,s,l){i=s===l.length-1,a.default.hasOwn(o,t)?i?r&&(o[t]=n):o=o[t]:o=o[t]=i?n:{}})),this}},{key:"merge",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a.default.isObject(e))throw new l.default(u.NOTA_OBJ+"`"+e+"`");var r=void 0;return a.default.each(Object.keys(e),(function(o,i,a){r=e[o],t.set(o,r,n)})),this}},{key:"separate",value:function(t){var n=this;if(!a.default.isArray(t))throw new l.default(u.NOTA_OBJ+"`"+t+"`");var r=new e({});return a.default.each(t,(function(e,t,o){var i=n.inspectRemove(e);r.set(e,i.value)})),this._source=r._source,this}},{key:"filter",value:function(t){var n=this,r=this.value,o=a.default.deepCopy(r),i=s.default.normalize(t).concat();if(a.default.stringOrArrayOf(i,"*"))return this._source=o,this;if(0===arguments.length||a.default.stringOrArrayOf(i,"")||a.default.stringOrArrayOf(i,"!*"))return this._source={},this;var l=void 0;"*"===i[0]?(l=new e(o),i.shift()):l=new e({});var u=void 0,c=void 0,d=void 0;return a.default.each(i,(function(t,o,i){if(u=new s.default(t),c=".*"===u.absGlob.slice(-2),(d=c?u.absGlob.slice(0,-2):u.absGlob).indexOf("*")<0)return u.isNegated?(l.remove(d),c&&l.set(d,{},!0)):l.copyFrom(r,d,null,!0),!0;n.each((function(t,n,r,o){e.eachNote(t,(function(e,t,n,o){if(u.test(e)){if(u.isNegated)return l.remove(e),!1;l.set(e,r,!0)}}))}))})),this._source=l.value,this}},{key:"remove",value:function(e){return this.inspectRemove(e),this}},{key:"delete",value:function(e){return this.remove(e),this}},{key:"clone",value:function(){return new e(a.default.deepCopy(this.value))}},{key:"copyTo",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!a.default.isObject(t))throw new l.default(u.DEST);var i=this.inspect(n);return i.has&&new e(t).set(r||n,i.value,o),this}},{key:"copyFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!a.default.isObject(t))throw new l.default(u.DEST);var i=new e(t).inspect(n);return i.has&&this.set(r||n,i.value,o),this}},{key:"moveTo",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!a.default.isObject(t))throw new l.default(u.DEST);var i=this.inspectRemove(n);return i.has&&new e(t).set(r||n,i.value,o),this}},{key:"moveFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!a.default.isObject(t))throw new l.default(u.DEST);var i=new e(t).inspectRemove(n);return i.has&&this.set(r||n,i.value,o),this}},{key:"rename",value:function(e,t,n){return t?this.moveTo(this._source,e,t,n):this}},{key:"renote",value:function(e,t,n){return this.rename(e,t,n)}},{key:"extract",value:function(e,t){var n={};return this.copyTo(n,e,t),n}},{key:"copyToNew",value:function(e,t){return this.extract(e,t)}},{key:"extrude",value:function(e,t){var n={};return this.moveTo(n,e,t),n}},{key:"moveToNew",value:function(e,t){return this.extrude(e,t)}},{key:"value",get:function(){return this._source}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"isValid",value:function(e){return"string"==typeof e&&/^[^\s.!]+(\.[^\s.!]+)*$/.test(e)}},{key:"countNotes",value:function(t){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");return t.split(".").length}},{key:"countLevels",value:function(t){return e.countNotes(t)}},{key:"first",value:function(t){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");return t.split(".")[0]}},{key:"last",value:function(t){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");return t.split(".").reverse()[0]}},{key:"parent",value:function(t){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");return t.indexOf(".")>=0?t.replace(/\.[^.]*$/,""):null}},{key:"eachNote",value:function(t,n){if(!e.isValid(t))throw new l.default(u.NOTATION+"`"+t+"`");var r=t.split("."),o=[],i=void 0;a.default.each(r,(function(e,t,a){if(o.push(e),i=o.join("."),!1===n(i,e,t,r))return!1}),e)}},{key:"eachLevel",value:function(t,n){e.eachNote(t,n)}}]),e}();c.Error=l.default,c.Glob=s.default,t.default=c},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(n(0)),s=r(n(1)),l=function(){function e(t){if(o(this,e),!e.isValid(t))throw new s.default('Invalid notation glob: "'+t+'"');var n=e.inspect(t);this._={glob:t,absGlob:n.absGlob,isNegated:n.isNegated,regexp:e.toRegExp(n.absGlob),levels:n.absGlob.split(".")}}return i(e,[{key:"test",value:function(e){return"*"===this.absGlob||""!==this.absGlob&&""!==e&&this.regexp.test(e)}},{key:"glob",get:function(){return this._.glob}},{key:"absGlob",get:function(){return this._.absGlob}},{key:"isNegated",get:function(){return this._.isNegated}},{key:"regexp",get:function(){return this._.regexp}},{key:"notes",get:function(){return this._.levels}},{key:"levels",get:function(){return this._.levels}}],[{key:"create",value:function(t){return new e(t)}},{key:"toRegExp",value:function(e){return 0===e.indexOf("!")&&(e=e.slice(1)),e=a.default.pregQuote(e).replace(/\\\*/g,"[^\\s\\.]*").replace(/\\\?/g,"."),new RegExp("^"+e+"(\\..+|$)")}},{key:"inspect",value:function(e){var t="!"===e.slice(0,1);return{absGlob:e=t?e.slice(1):e,isNegated:t}}},{key:"isValid",value:function(e){return"string"==typeof e&&/^(!?([^\s.!*]+|\*)(\.([^\s.!*]+|\*))*)$/.test(e)}},{key:"compare",value:function(e,t){if(e===t)return 0;var n=e.split("."),r=t.split(".");if(n.length===r.length){var o=/(?:^|\.)\*(?:$|\.)/g,i=e.match(o),a=t.match(o),s=i?i.length:0,l=a?a.length:0;if(s===l){var u=0===e.indexOf("!"),c=0===t.indexOf("!");if(u===c)return e<t?-1:1;var d=u?e.slice(1):e,p=c?t.slice(1):t;return d===p?u?1:-1:d<p?-1:1}return s>l?-1:1}return n.length<r.length?-1:1}},{key:"sort",value:function(t){return t.sort(e.compare)}},{key:"normalize",value:function(t){t=a.default.ensureArray(t).map((function(e){return e.trim()})),t=e.sort(t),a.default.eachRight(t,(function(n,r){var o=e.inspect(n),i=!1,s=!1,l=!1,u=!0,c=!1,d=!0;a.default.eachRight(t,(function(t,a){if(a!==r){var p=e.inspect(t),f=e.toRegExp(p.absGlob);if(n===t)return i=!0,!1;if(p.isNegated&&n===p.absGlob)return s=!0,!1;if(o.isNegated){if(p.isNegated&&f.test(o.absGlob))return l=!0,!1;u&&f.test(o.absGlob)&&(u=!1)}else!p.isNegated&&f.test(o.absGlob)?c=!0:d&&f.test(o.absGlob)&&(d=!1)}}));var p=o.isNegated?l||u:c&&d;(i||s||p)&&t.splice(r,1)}));var n=t.indexOf("!*");return n>=0&&t.splice(n,1),t}},{key:"union",value:function(t,n){if(a.default.hasSingleItemOf(t,"*")||a.default.hasSingleItemOf(n,"*"))return["*"];var r=t.concat(),o=n.concat(),i=void 0,s=void 0,l=void 0,u=void 0,c=[];a.default.eachRight(r,(function(t,n){l=e.inspect(t),i=e.toRegExp(l.absGlob),a.default.eachRight(o,(function(a,d){if(u=e.inspect(a),s=e.toRegExp(u.absGlob),l.isNegated&&!u.isNegated&&(l.absGlob===u.absGlob||s.test(l.absGlob)&&-1===o.indexOf(t)&&-1===c.indexOf(t)))return r.splice(n,1),!1;if(l.isNegated||!u.isNegated||!(l.absGlob===u.absGlob||i.test(u.absGlob)&&-1===r.indexOf(a)&&-1===c.indexOf(a))){if(l.isNegated&&u.isNegated&&t!==a){if(s.test(l.absGlob))return o.splice(d,1),void c.push(t);if(i.test(u.absGlob))return r.splice(n,1),c.push(a),!1}return l.isNegated||u.isNegated||t!==a?void 0:(r.splice(n,1),!1)}o.splice(d,1)}))}));var d=r.concat(o);return e.normalize(d)}}]),e}();t.default=l}]);var T,O,C=I.exports;function L(){if(T)return b;T=1,Object.defineProperty(b,"__esModule",{value:!0});var e=C,t=_,n=M(),r=["*","!","$","$extend"];b.RESERVED_KEYWORDS=r;b.ERR_LOCK="Cannot alter the underlying grants model. AccessControl instance is locked.";var o={type:function(e){return Object.prototype.toString.call(e).match(/\s(\w+)/i)[1].toLowerCase()},hasDefined:function(e,t){return e.hasOwnProperty(t)&&void 0!==e[t]},toStringArray:function(e){return Array.isArray(e)?e:"string"==typeof e?e.trim().split(/\s*[;,]\s*/):[]},isFilledStringArray:function(e){if(!e||!Array.isArray(e))return!1;for(var t=0,n=e;t<n.length;t++){var r=n[t];if("string"!=typeof r||""===r.trim())return!1}return!0},isEmptyArray:function(e){return Array.isArray(e)&&0===e.length},pushUniq:function(e,t){return e.indexOf(t)<0&&e.push(t),e},uniqConcat:function(e,t){var n=e.concat();return t.forEach((function(e){o.pushUniq(n,e)})),n},subtractArray:function(e,t){return e.concat().filter((function(e){return-1===t.indexOf(e)}))},deepFreeze:function(e){if("object"===o.type(e))return Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];Array.isArray(n)&&Object.freeze(n),"object"===o.type(n)&&o.deepFreeze(n)})),Object.freeze(e)},each:function(e,t,n){void 0===n&&(n=null);for(var r=e.length,o=-1;++o<r&&!1!==t.call(n,e[o],o,e););},eachKey:function(e,t,n){void 0===n&&(n=null),o.each(Object.keys(e),t,n)},eachRole:function(e,t){o.eachKey(e,(function(n){return t(e[n],n)}))},eachRoleResource:function(e,t){var n,r;o.eachKey(e,(function(i){n=e[i],o.eachKey(n,(function(e){r=i[e],t(i,e,r)}))}))},isInfoFulfilled:function(e){return o.hasDefined(e,"role")&&o.hasDefined(e,"action")&&o.hasDefined(e,"resource")},validName:function(e,t){if(void 0===t&&(t=!0),"string"!=typeof e||""===e.trim()){if(!t)return!1;throw new n.AccessControlError("Invalid name, expected a valid string.")}if(r.indexOf(e)>=0){if(!t)return!1;throw new n.AccessControlError('Cannot use reserved name: "'+e+'"')}return!0},hasValidNames:function(e,t){void 0===t&&(t=!0);var n=!0;return o.each(o.toStringArray(e),(function(e){return!!o.validName(e,t)||(n=!1,!1)})),n},validResourceObject:function(e){if("object"!==o.type(e))throw new n.AccessControlError("Invalid resource definition.");return o.eachKey(e,(function(r){var i=r.split(":");if(-1===t.actions.indexOf(i[0]))throw new n.AccessControlError('Invalid action: "'+r+'"');if(i[1]&&-1===t.possessions.indexOf(i[1]))throw new n.AccessControlError('Invalid action possession: "'+r+'"');var a=e[r];if(!o.isEmptyArray(a)&&!o.isFilledStringArray(a))throw new n.AccessControlError('Invalid resource attributes for action "'+r+'".')})),!0},validRoleObject:function(e,t){var r=e[t];if(!r||"object"!==o.type(r))throw new n.AccessControlError("Invalid role definition.");return o.eachKey(r,(function(i){if(o.validName(i,!1))o.validResourceObject(r[i]);else{if("$extend"!==i)throw new n.AccessControlError('Cannot use reserved name "'+i+'" for a resource.');var a=r[i];if(!o.isFilledStringArray(a))throw new n.AccessControlError('Invalid extend value for role "'+t+'": '+JSON.stringify(a));o.extendRole(e,t,a)}})),!0},getInspectedGrants:function(e){var t={},r=o.type(e);if("object"===r)o.eachKey(e,(function(t){return!!o.validName(t)&&o.validRoleObject(e,t)})),t=e;else{if("array"!==r)throw new n.AccessControlError("Invalid grants object. Expected an array or object.");e.forEach((function(e){return o.commitToGrants(t,e,!0)}))}return t},getResources:function(e){var t={};return o.eachRoleResource(e,(function(e,n,r){t[n]=null})),Object.keys(t)},normalizeActionPossession:function(e,r){if(void 0===r&&(r=!1),"string"!=typeof e.action)throw new n.AccessControlError("Invalid action: "+JSON.stringify(e));var o=e.action.split(":");if(t.actions.indexOf(o[0].trim().toLowerCase())<0)throw new n.AccessControlError("Invalid action: "+o[0]);e.action=o[0].trim().toLowerCase();var i=e.possession||o[1];if(i){if(t.possessions.indexOf(i.trim().toLowerCase())<0)throw new n.AccessControlError("Invalid action possession: "+i);e.possession=i.trim().toLowerCase()}else e.possession=t.Possession.ANY;return r?e.action+":"+e.possession:e},normalizeQueryInfo:function(e){if("object"!==o.type(e))throw new n.AccessControlError("Invalid IQueryInfo: "+typeof e);if((e=Object.assign({},e)).role=o.toStringArray(e.role),!o.isFilledStringArray(e.role))throw new n.AccessControlError("Invalid role(s): "+JSON.stringify(e.role));if("string"!=typeof e.resource||""===e.resource.trim())throw new n.AccessControlError('Invalid resource: "'+e.resource+'"');return e.resource=e.resource.trim(),e=o.normalizeActionPossession(e)},normalizeAccessInfo:function(e,t){if(void 0===t&&(t=!1),"object"!==o.type(e))throw new n.AccessControlError("Invalid IAccessInfo: "+typeof e);if((e=Object.assign({},e)).role=o.toStringArray(e.role),0===e.role.length||!o.isFilledStringArray(e.role))throw new n.AccessControlError("Invalid role(s): "+JSON.stringify(e.role));if(e.resource=o.toStringArray(e.resource),0===e.resource.length||!o.isFilledStringArray(e.resource))throw new n.AccessControlError("Invalid resource(s): "+JSON.stringify(e.resource));return e.denied||Array.isArray(e.attributes)&&0===e.attributes.length?e.attributes=[]:e.attributes=e.attributes?o.toStringArray(e.attributes):["*"],t&&(e=o.normalizeActionPossession(e)),e},resetAttributes:function(e){return e.denied?(e.attributes=[],e):((!e.attributes||o.isEmptyArray(e.attributes))&&(e.attributes=["*"]),e)},getRoleHierarchyOf:function(e,t,r){var i=e[t];if(!i)throw new n.AccessControlError('Role not found: "'+t+'"');var a=[t];return!Array.isArray(i.$extend)||0===i.$extend.length||i.$extend.forEach((function(i){if(!e[i])throw new n.AccessControlError('Role not found: "'+e[i]+'"');if(i===t)throw new n.AccessControlError('Cannot extend role "'+t+'" by itself.');if(r&&r===i)throw new n.AccessControlError('Cross inheritance is not allowed. Role "'+i+'" already extends "'+r+'".');var s=o.getRoleHierarchyOf(e,i,r||t);a=o.uniqConcat(a,s)})),a},getFlatRoles:function(e,t){var r=o.toStringArray(t);if(0===r.length)throw new n.AccessControlError("Invalid role(s): "+JSON.stringify(t));var i=o.uniqConcat([],r);return r.forEach((function(t){i=o.uniqConcat(i,o.getRoleHierarchyOf(e,t))})),i},getNonExistentRoles:function(e,t){var n=[];if(o.isEmptyArray(t))return n;for(var r=0,i=t;r<i.length;r++){var a=i[r];e.hasOwnProperty(a)||n.push(a)}return n},getCrossExtendingRole:function(e,t,n){var r=o.toStringArray(n),i=null;return o.each(r,(function(n){if(i||t===n)return!1;var r=o.getRoleHierarchyOf(e,n);return o.each(r,(function(e){return e!==t||(i=n,!1)})),!0})),i},extendRole:function(e,t,r){if(0===(t=o.toStringArray(t)).length)throw new n.AccessControlError("Invalid role(s): "+JSON.stringify(t));if(!o.isEmptyArray(r)){var i=o.toStringArray(r).concat();if(0===i.length)throw new n.AccessControlError("Cannot inherit invalid role(s): "+JSON.stringify(r));var a=o.getNonExistentRoles(e,i);if(a.length>0)throw new n.AccessControlError('Cannot inherit non-existent role(s): "'+a.join(", ")+'"');t.forEach((function(t){if(!e[t])throw new n.AccessControlError('Role not found: "'+t+'"');if(i.indexOf(t)>=0)throw new n.AccessControlError('Cannot extend role "'+t+'" by itself.');var r=o.getCrossExtendingRole(e,t,i);if(r)throw new n.AccessControlError('Cross inheritance is not allowed. Role "'+r+'" already extends "'+t+'".');o.validName(t);var a=e[t];Array.isArray(a.$extend)?a.$extend=o.uniqConcat(a.$extend,i):a.$extend=i}))}},preCreateRoles:function(e,t){if("string"==typeof t&&(t=o.toStringArray(t)),!Array.isArray(t)||0===t.length)throw new n.AccessControlError("Invalid role(s): "+JSON.stringify(t));t.forEach((function(t){o.validName(t)&&!e.hasOwnProperty(t)&&(e[t]={})}))},commitToGrants:function(e,t,n){void 0===n&&(n=!1),(t=o.normalizeAccessInfo(t,n)).role.forEach((function(n){o.validName(n)&&!e.hasOwnProperty(n)&&(e[n]={});var r=e[n],i=t.action+":"+t.possession;t.resource.forEach((function(e){o.validName(e)&&!r.hasOwnProperty(e)&&(r[e]={}),r[e][i]=o.toStringArray(t.attributes)}))}))},getUnionAttrsOfRoles:function(t,n){n=o.normalizeQueryInfo(n);var r,i,a=[];o.getFlatRoles(t,n.role).forEach((function(e,o){r=t[e],(i=r[n.resource])&&a.push((i[n.action+":"+n.possession]||i[n.action+":any"]||[]).concat())}));var s=[],l=a.length;if(l>0){s=a[0];for(var u=1;u<l;)s=e.Glob.union(s,a[u]),u++}return s},lockAC:function(e){var t=e;if(!t._grants||0===Object.keys(t._grants).length)throw new n.AccessControlError("Cannot lock empty or invalid grants model.");var r=e.isLocked&&Object.isFrozen(t._grants);if(r||(r=!!o.deepFreeze(t._grants)),!r)throw new n.AccessControlError("Could not lock grants: "+typeof t._grants);t._isLocked=r},filter:function(t,n){return Array.isArray(n)&&0!==n.length?new e(t).filter(n).value:{}},filterAll:function(e,t){return Array.isArray(e)?e.map((function(e){return o.filter(e,t)})):o.filter(e,t)}};return b.utils=o,b}var P,w={};var Y,G,U={};function M(){return G||(G=1,function(e){function t(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),t(y),t(function(){if(O)return v;O=1,Object.defineProperty(v,"__esModule",{value:!0});var e=M(),t=_,n=L(),r=function(){function r(t,r,o){if(void 0===o&&(o=!1),this._={},this._ac=t,this._grants=t._grants,this._.denied=o,"string"==typeof r||Array.isArray(r))this.role(r);else if("object"===n.utils.type(r)){if(0===Object.keys(r).length)throw new e.AccessControlError("Invalid IAccessInfo: {}");r.denied=o,this._=n.utils.resetAttributes(r),n.utils.isInfoFulfilled(this._)&&n.utils.commitToGrants(this._grants,this._,!0)}else if(void 0!==r)throw new e.AccessControlError("Invalid role(s), expected a valid string, string[] or IAccessInfo.")}return Object.defineProperty(r.prototype,"denied",{get:function(){return this._.denied},enumerable:!0,configurable:!0}),r.prototype.role=function(e){return n.utils.preCreateRoles(this._grants,e),this._.role=e,this},r.prototype.resource=function(e){return n.utils.hasValidNames(e,!0),this._.resource=e,this},r.prototype.attributes=function(e){return this._.attributes=e,this},r.prototype.extend=function(e){return n.utils.extendRole(this._grants,this._.role,e),this},r.prototype.inherit=function(e){return this.extend(e),this},r.prototype.grant=function(e){return new r(this._ac,e,!1).attributes(["*"])},r.prototype.deny=function(e){return new r(this._ac,e,!0).attributes([])},r.prototype.lock=function(){return n.utils.lockAC(this._ac),this},r.prototype.createOwn=function(e,n){return this._prepareAndCommit(t.Action.CREATE,t.Possession.OWN,e,n)},r.prototype.createAny=function(e,n){return this._prepareAndCommit(t.Action.CREATE,t.Possession.ANY,e,n)},r.prototype.create=function(e,t){return this.createAny(e,t)},r.prototype.readOwn=function(e,n){return this._prepareAndCommit(t.Action.READ,t.Possession.OWN,e,n)},r.prototype.readAny=function(e,n){return this._prepareAndCommit(t.Action.READ,t.Possession.ANY,e,n)},r.prototype.read=function(e,t){return this.readAny(e,t)},r.prototype.updateOwn=function(e,n){return this._prepareAndCommit(t.Action.UPDATE,t.Possession.OWN,e,n)},r.prototype.updateAny=function(e,n){return this._prepareAndCommit(t.Action.UPDATE,t.Possession.ANY,e,n)},r.prototype.update=function(e,t){return this.updateAny(e,t)},r.prototype.deleteOwn=function(e,n){return this._prepareAndCommit(t.Action.DELETE,t.Possession.OWN,e,n)},r.prototype.deleteAny=function(e,n){return this._prepareAndCommit(t.Action.DELETE,t.Possession.ANY,e,n)},r.prototype.delete=function(e,t){return this.deleteAny(e,t)},r.prototype._prepareAndCommit=function(e,t,r,o){return this._.action=e,this._.possession=t,r&&(this._.resource=r),this._.denied?this._.attributes=[]:this._.attributes=o?n.utils.toStringArray(o):["*"],n.utils.commitToGrants(this._grants,this._,!1),this._.attributes=void 0,this},r}();return v.Access=r,v}()),t(function(){if(P)return w;P=1,Object.defineProperty(w,"__esModule",{value:!0});var e=M(),t=_,n=L(),r=function(){function r(t,r){if(this._={},this._grants=t,"string"==typeof r||Array.isArray(r))this.role(r);else if("object"===n.utils.type(r)){if(0===Object.keys(r).length)throw new e.AccessControlError("Invalid IQueryInfo: {}");this._=r}else if(void 0!==r)throw new e.AccessControlError("Invalid role(s), expected a valid string, string[] or IQueryInfo.")}return r.prototype.role=function(e){return this._.role=e,this},r.prototype.resource=function(e){return this._.resource=e,this},r.prototype.createOwn=function(e){return this._getPermission(t.Action.CREATE,t.Possession.OWN,e)},r.prototype.createAny=function(e){return this._getPermission(t.Action.CREATE,t.Possession.ANY,e)},r.prototype.create=function(e){return this.createAny(e)},r.prototype.readOwn=function(e){return this._getPermission(t.Action.READ,t.Possession.OWN,e)},r.prototype.readAny=function(e){return this._getPermission(t.Action.READ,t.Possession.ANY,e)},r.prototype.read=function(e){return this.readAny(e)},r.prototype.updateOwn=function(e){return this._getPermission(t.Action.UPDATE,t.Possession.OWN,e)},r.prototype.updateAny=function(e){return this._getPermission(t.Action.UPDATE,t.Possession.ANY,e)},r.prototype.update=function(e){return this.updateAny(e)},r.prototype.deleteOwn=function(e){return this._getPermission(t.Action.DELETE,t.Possession.OWN,e)},r.prototype.deleteAny=function(e){return this._getPermission(t.Action.DELETE,t.Possession.ANY,e)},r.prototype.delete=function(e){return this.deleteAny(e)},r.prototype._getPermission=function(t,n,r){return this._.action=t,this._.possession=n,r&&(this._.resource=r),new e.Permission(this._grants,this._)},r}();return w.Query=r,w}()),t(function(){if(Y)return U;Y=1,Object.defineProperty(U,"__esModule",{value:!0});var e=L(),t=function(){function t(t,n){this._={},this._.attributes=e.utils.getUnionAttrsOfRoles(t,n),this._.role=n.role,this._.resource=n.resource}return Object.defineProperty(t.prototype,"roles",{get:function(){return this._.role},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resource",{get:function(){return this._.resource},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"granted",{get:function(){return!(!this.attributes||0===this.attributes.length)&&this.attributes.some((function(e){return"!"!==e.trim().slice(0,1)}))},enumerable:!0,configurable:!0}),t.prototype.filter=function(t){return e.utils.filterAll(t,this.attributes)},t}();return U.Permission=t,U}())}(f)),f}Object.defineProperty(p,"__esModule",{value:!0});var D=M(),B=_,k=L(),x=function(){function e(e){this._isLocked=!1,0===arguments.length&&(e={}),this.setGrants(e)}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this._isLocked&&Object.isFrozen(this._grants)},enumerable:!0,configurable:!0}),e.prototype.getGrants=function(){return this._grants},e.prototype.setGrants=function(e){if(this.isLocked)throw new D.AccessControlError(k.ERR_LOCK);return this._grants=k.utils.getInspectedGrants(e),this},e.prototype.reset=function(){if(this.isLocked)throw new D.AccessControlError(k.ERR_LOCK);return this._grants={},this},e.prototype.lock=function(){return k.utils.lockAC(this),this},e.prototype.extendRole=function(e,t){if(this.isLocked)throw new D.AccessControlError(k.ERR_LOCK);return k.utils.extendRole(this._grants,e,t),this},e.prototype.removeRoles=function(e){var t=this;if(this.isLocked)throw new D.AccessControlError(k.ERR_LOCK);var n=k.utils.toStringArray(e);if(0===n.length||!k.utils.isFilledStringArray(n))throw new D.AccessControlError("Invalid role(s): "+JSON.stringify(e));return n.forEach((function(e){if(!t._grants[e])throw new D.AccessControlError('Cannot remove a non-existing role: "'+e+'"');delete t._grants[e]})),k.utils.eachRole(this._grants,(function(e,t){Array.isArray(e.$extend)&&(e.$extend=k.utils.subtractArray(e.$extend,n))})),this},e.prototype.removeResources=function(e,t){if(this.isLocked)throw new D.AccessControlError(k.ERR_LOCK);return this._removePermission(e,t),this},e.prototype.getRoles=function(){return Object.keys(this._grants)},e.prototype.getInheritedRolesOf=function(e){var t=k.utils.getRoleHierarchyOf(this._grants,e);return t.shift(),t},e.prototype.getExtendedRolesOf=function(e){return this.getInheritedRolesOf(e)},e.prototype.getResources=function(){return k.utils.getResources(this._grants)},e.prototype.hasRole=function(e){var t=this;return Array.isArray(e)?e.every((function(e){return t._grants.hasOwnProperty(e)})):this._grants.hasOwnProperty(e)},e.prototype.hasResource=function(e){var t=this.getResources();return Array.isArray(e)?e.every((function(e){return t.indexOf(e)>=0})):"string"==typeof e&&""!==e&&t.indexOf(e)>=0},e.prototype.can=function(e){if(0!==arguments.length&&void 0===e)throw new D.AccessControlError("Invalid role(s): undefined");return new D.Query(this._grants,e)},e.prototype.query=function(e){return this.can(e)},e.prototype.permission=function(e){return new D.Permission(this._grants,e)},e.prototype.grant=function(e){if(this.isLocked)throw new D.AccessControlError(k.ERR_LOCK);if(0!==arguments.length&&void 0===e)throw new D.AccessControlError("Invalid role(s): undefined");return new D.Access(this,e,!1)},e.prototype.allow=function(e){return this.grant(e)},e.prototype.deny=function(e){if(this.isLocked)throw new D.AccessControlError(k.ERR_LOCK);if(0!==arguments.length&&void 0===e)throw new D.AccessControlError("Invalid role(s): undefined");return new D.Access(this,e,!0)},e.prototype.reject=function(e){return this.deny(e)},e.prototype._removePermission=function(e,t,n){var r=this;if(0===(e=k.utils.toStringArray(e)).length||!k.utils.isFilledStringArray(e))throw new D.AccessControlError("Invalid resource(s): "+JSON.stringify(e));if(void 0!==t&&(0===(t=k.utils.toStringArray(t)).length||!k.utils.isFilledStringArray(t)))throw new D.AccessControlError("Invalid role(s): "+JSON.stringify(t));k.utils.eachRoleResource(this._grants,(function(o,i,a){if(e.indexOf(i)>=0&&(!t||t.indexOf(o)>=0))if(n){var s=k.utils.normalizeActionPossession({action:n},!0);delete r._grants[o][i][s]}else delete r._grants[o][i]}))},Object.defineProperty(e,"Action",{get:function(){return B.Action},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Possession",{get:function(){return B.Possession},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Error",{get:function(){return D.AccessControlError},enumerable:!0,configurable:!0}),e.filter=function(e,t){return k.utils.filterAll(e,t)},e.isACError=function(e){return e instanceof D.AccessControlError},e.isAccessControlError=function(t){return e.isACError(t)},e}();p.AccessControl=x,function(e){function t(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),t(p),t(M())}(d);var j=d.AccessControl;c.exports=j;var F=c.exports.AccessControl=j;const{EXPORT_JSON:H,SITE_LIMITS:K}=l,{publicApi:Z,owner:q,admin:V,editor:$,author:W,sysAdmin:z,developer:J,superUser:Q,subscriber:X,sysReviewer:ee}=a,{TAG:te,SITE:ne,POST:re,PAGE:oe,TOPIC:ie,API_KEY:ae,SITEMAP:se,LICENSE:le,PAYMENT:ue,CATEGORY:ce,USER_META:de,CAMPAIGN:pe,RE_INDEX:fe,All_SITES:ye,MEMBERSHIP:Ee,PUBLIC_API:Ae,CUSTOM_ROLE:ve,URL_REDIRECT:_e,WEBHOOK_URL:he,ACTIVITY_LOG:Ne,PRESIGNED_URL:ge,MEDIA_LIBRARY:me,AGENCY_CONFIG:Se,CLIENT_BILLING:Re}=s,be=new F,Ie=Object.values(s);be.grant(W).create([re,ie,ge,me]).read([re,ie,ce,te,ge,me,ne]).update([re,ie,me]).grant($).extend(W).create([ce,te]).read([oe]).update([ce,te]).delete([re,ie,ce,te,me]).grant(J).extend($).create([oe]).read([ae,pe]).update([ne,oe,pe]).delete([oe]).grant(V).extend($).create([oe,Ee,de,_e,ae,se,pe,ve,he,Ae]).read([oe,Ee,de,_e,ae,pe,ve,he,Ae]).update([ne,oe,le,ue,Ee,de,_e,ae,pe,ve,Se,he,Ae]).delete([oe,Ee,de,ie,_e,ae,pe,ve,he,Ae]).grant(q).extend(V).create([ne,Re,Ae]).read([Re,Ae,Ne]).update([Re]).delete([ne,Re,Ae,Ne]).grant(Q).extend(q),be.grant(Z).create([ie]).read([ie]).update([ie]).delete([ie]),be.grant(X).read([de,Ee]).update([Ee]),be.grant(z).create([...Ie,H]).read(Ie).update([...Ie,K]).delete(Ie),be.grant(ee).create([te,re,ne,oe,ie,le,se,ue,ae,ce,pe,fe,ye,de,Ee,Ae,ve,H,he,_e,ge,me,Se,Re]).read(Ie).update([te,ne,re,oe,ie,le,ue,ae,se,ce,pe,fe,de,ye,Ae,Ee,ve,K,H,he,_e,me,ge,Se,Re]).deleteOwn([te,ne,re,oe,ie,ae,se,ce,pe,fe,de,Ee,Ae,ve,he,_e,Ne,ge,Se,me,Re]);const Te={billingType:{MONTHLY:"MONTHLY",YEARLY:"YEARLY",FOREVER:"FOREVER",TWO_YEARLY:"TWO_YEARLY"},siteTypes:{STATIC:"STATIC",AGENCY:"AGENCY"},product:{STARTER:"STARTER",PERSONAL:"PERSONAL",AGENCY:"AGENCY",FREE:"FREE",BUSINESS:"BUSINESS",PREMIUM:"PREMIUM",AGENCY_PLUS:"AGENCY_PLUS"},planType:{REGULAR:"REGULAR",AGENCY:"AGENCY"},plan:{CMS:"CMS",FREE:"FREE",PLAN_1:"PLAN_1",PLAN_2:"PLAN_2",PLAN_3:"PLAN_3",STARTER_25:"STARTER_25",PREMIUM_10:"PREMIUM_10",PREMIUM_25:"PREMIUM_25",PREMIUM_100:"PREMIUM_100",STARTER:"STARTER",PERSONAL:"PERSONAL",PERSONAL_MONTHLY:"PERSONAL_MONTHLY",BUSINESS:"BUSINESS",BUSINESS_3:"BUSINESS_3",BUSINESS_10:"BUSINESS_10",BUSINESS_MONTHLY:"BUSINESS_MONTHLY",BUSINESS_MONTHLY_10:"BUSINESS_MONTHLY_10",AGENCY:"AGENCY",AGENCY_25:"AGENCY_25",AGENCY_100:"AGENCY_100",AGENCY_250:"AGENCY_250",AGENCY_PLUS:"AGENCY_PLUS",AGENCY_MONTHLY_25:"AGENCY_MONTHLY_25",AGENCY_MONTHLY_100:"AGENCY_MONTHLY_100",AGENCY_MONTHLY_250:"AGENCY_MONTHLY_250",LTD_AGENCY_NCF:"LTD_AGENCY_NCF",LTD_AGENCY_PRIME:"LTD_AGENCY_PRIME"}},{billingType:Oe,product:Ce,planType:Le,plan:Pe}=Te,{YEARLY:we,MONTHLY:Ye,TWO_YEARLY:Ge,FOREVER:Ue}=Oe,Me={};Me[Pe.FREE]={price:0,planId:0,provider:"",billingType:"",displayName:"Free",planKey:Pe.FREE,planType:Le.REGULAR,productType:Ce.FREE,limits:{domain:0}},Me[Pe.PERSONAL_MONTHLY]={limits:{domain:1},price:{[Ye]:{IN:{original:1199,discount:5.6,discountAllowed:!1,discountRatio:.3,currency:"INR",currencySign:"\u20b9"},DEFAULT:{original:29,discount:5.6,discountAllowed:!1,discountRatio:.3,currency:"USD",currencySign:"$"}}},billingType:Ye,discountPrice:{[Ye]:5.6},discountAllowed:!1,coupon:"BLF30",discountRatio:.3,planKey:Pe.PERSONAL_MONTHLY,planType:Le.REGULAR,productType:Ce.PERSONAL,displayName:"Personal (1 Domain) - Monthly"},Me[Pe.PERSONAL]={price:{[we]:{IN:{original:8999,discount:33.6,discountAllowed:!1,discountRatio:.3,currency:"INR",currencySign:"\u20b9"},DEFAULT:{original:216,discount:33.6,discountAllowed:!1,discountRatio:.3,currency:"USD",currencySign:"$"}},[Ue]:{DEFAULT:{original:249,domain:199,discount:33.6,discountAllowed:!1,discountRatio:.3,currency:"USD",currencySign:"$"}}},limits:{domain:1},coupon:"BLF30",billingType:we,displayName:"Personal (1 Domain) - Yearly",ltdDisplayName:"Personal (LTD)",planKey:Pe.PERSONAL,planType:Le.REGULAR,productType:Ce.PERSONAL},Me[Pe.PLAN_1]={price:36,provider:"PADDLE",billingType:"YEARLY",displayName:"Starter ( 25 Domains )",planKey:Pe.PLAN_1,planType:Le.REGULAR,productType:Ce.STARTER,limits:{domain:25}},Me[Pe.PLAN_2]={price:50,provider:"PADDLE",billingType:"YEARLY",displayName:"Premium (25 Domains)",planKey:Pe.PLAN_2,planType:Le.REGULAR,productType:Te.product.PREMIUM,limits:{domain:25}},Me[Pe.PLAN_3]={provider:"PADDLE",billingType:Oe.FOREVER,displayName:"Lifetime",planKey:Te.plan.PLAN_3,planType:Le.REGULAR,productType:Te.product.PREMIUM,price:{[Ue]:{DEFAULT:{domain:149,currency:"USD",currencySign:"$"}}},limits:{domain:3}},Me[Pe.LTD_AGENCY_PRIME]={displayName:"DORIK CMS - PRIME LTD",billingType:Oe.FOREVER,planType:Le.AGENCY,planKey:Pe.LTD_AGENCY_PRIME,productType:Ce.AGENCY,price:{[Ue]:{DEFAULT:{domain:149,currency:"USD",currencySign:"$"}}},limits:{pageViews:1e5,staffLimit:1e3,category:1e3,tag:1e3,post:1e3,members:5e4,teamMembers:1e3}},Me[Pe.LTD_AGENCY_NCF]={displayName:"DORIK CMS - NoCodeFrance",billingType:Oe.FOREVER,planType:Le.AGENCY,planKey:Pe.LTD_AGENCY_NCF,productType:Ce.AGENCY,price:{[Ue]:{DEFAULT:{domain:149,currency:"USD",currencySign:"$"}}},limits:{pageViews:1e5,staffLimit:1e3,category:1e3,tag:1e3,post:1e3,members:5e4,teamMembers:1e3}},Me[Pe.STARTER_25]={price:79,provider:"PADDLE",billingType:"YEARLY",displayName:"Starter  (25 Domains)",planKey:Pe.STARTER_25,planType:Le.REGULAR,productType:Ce.STARTER,limits:{domain:25}},Me[Pe.PREMIUM_10]={price:79,provider:"PADDLE",billingType:"YEARLY",displayName:"Premium 10",planKey:Pe.PREMIUM_10,planType:Le.REGULAR,productType:Ce.PREMIUM,limits:{domain:100}},Me[Pe.PREMIUM_25]={price:79,provider:"PADDLE",billingType:"YEARLY",displayName:"Premium 25",planKey:Pe.PREMIUM_25,planType:Le.REGULAR,productType:Ce.PREMIUM,limits:{domain:100}},Me[Pe.PREMIUM_100]={price:199,provider:"PADDLE",billingType:"YEARLY",displayName:"Premium",planKey:Pe.PREMIUM_100,planType:Le.REGULAR,productType:Ce.PREMIUM,limits:{domain:100}},Me[Pe.BUSINESS_MONTHLY]={provider:"PADDLE",billingType:Ye,displayName:"Business (3 Domains) - Monthly",planKey:Pe.BUSINESS_MONTHLY,price:{[Ye]:{IN:{original:2399,discount:13.3,discountAllowed:!1,discountRatio:.3,currency:"INR",currencySign:"\u20b9"},DEFAULT:{original:59,discount:13.3,discountAllowed:!1,discountRatio:.3,currency:"USD",currencySign:"$"}}},coupon:"BLF30",discountRatio:.3,planType:Le.REGULAR,productType:Ce.BUSINESS,limits:{domain:3}},Me[Pe.BUSINESS_3]={price:{[we]:{IN:{original:19188,discount:90.3,discountAllowed:!1,discountRatio:.3,currency:"INR",currencySign:"\u20b9"},DEFAULT:{original:468,discount:90.3,discountAllowed:!1,discountRatio:.3,currency:"USD",currencySign:"$"}},[Ue]:{DEFAULT:{original:599,domain:149,discount:90.3,discountAllowed:!1,discountRatio:.3,currency:"USD",currencySign:"$"}}},coupon:"BLF30",discountRatio:.3,billingType:we,planKey:Pe.BUSINESS_3,planType:Le.REGULAR,displayName:"Business (3 Domains) - Yearly",ltdDisplayName:"Business (LTD)",productType:Ce.BUSINESS,limits:{domain:3}},Me[Pe.BUSINESS_10]={price:{[we]:{IN:{original:59988,discount:13.3,discountAllowed:!1,discountRatio:.3,currency:"INR",currencySign:"\u20b9"},DEFAULT:{original:1428,discount:244.3,discountAllowed:!1,discountRatio:.3,currency:"USD",currencySign:"$"}}},coupon:"BLF30",discountRatio:.3,billingType:we,displayName:"Business (10 Domains) - Yearly",planKey:Pe.BUSINESS_10,planType:Le.REGULAR,productType:Ce.BUSINESS,limits:{domain:10}},Me[Pe.BUSINESS_MONTHLY_10]={price:{[Ye]:{IN:{original:6599,discount:13.3,discountAllowed:!1,discountRatio:.3,currency:"INR",currencySign:"\u20b9"},DEFAULT:{original:159,discount:34.3,discountAllowed:!1,discountRatio:.3,coupon:"BLF30",currency:"USD",currencySign:"$"}}},coupon:"BLF30",discountRatio:.3,billingType:Ye,displayName:"Business (10 Domains) - Monthly",planKey:Pe.BUSINESS_MONTHLY_10,planType:Le.REGULAR,productType:Ce.BUSINESS,limits:{domain:10}},Me[Pe.AGENCY_25]={billingType:we,displayName:"Agency (25 Domains)",planKey:Pe.AGENCY_25,planType:Le.AGENCY,productType:Ce.AGENCY,discountAllowed:!0,coupon:"BLF30",price:{[we]:2868,[Ge]:699},discountPrice:{[we]:314.3,[Ge]:489.3},discountRatio:.3,limits:{domain:25}},Me[Pe.AGENCY_100]={billingType:we,displayName:"Agency (100 Domains)",planType:Le.AGENCY,planKey:Pe.AGENCY_100,productType:Ce.AGENCY,discountAllowed:!0,coupon:"BLF30",limits:{domain:100},price:{[we]:849,[Ge]:1299},discountPrice:{[we]:594.3,[Ge]:909.3},discountRatio:.3},Me[Pe.AGENCY_250]={displayName:"Agency (250 Domains)",billingType:we,planType:Le.AGENCY,planKey:Pe.AGENCY_250,productType:Ce.AGENCY,discountAllowed:!0,coupon:"BLF30",limits:{domain:250},price:{[we]:1199,[Ge]:1999},discountPrice:{[we]:839.3,[Ge]:1399.3},discountRatio:.3},Me[Pe.AGENCY_MONTHLY_25]={billingType:Ye,displayName:"Agency (25 Domains) - Monthly",planKey:Pe.AGENCY_MONTHLY_25,planType:Le.AGENCY,productType:Ce.AGENCY,discountAllowed:!1,coupon:"BLF30",price:{[Ye]:299},discountPrice:{[Ye]:41.3},discountRatio:.3,limits:{domain:25}},Me[Pe.AGENCY_MONTHLY_100]={billingType:Ye,displayName:"Agency (100 Domains) - Monthly",planType:Le.AGENCY,planKey:Pe.AGENCY_MONTHLY_100,productType:Ce.AGENCY,discountAllowed:!1,coupon:"BLF30",limits:{domain:100},price:{[Ye]:119},discountPrice:{[Ye]:83.3},discountRatio:.3},Me[Pe.AGENCY_MONTHLY_250]={displayName:"Agency (250 Domains) - Monthly",billingType:Ye,planType:Le.AGENCY,planKey:Pe.AGENCY_MONTHLY_250,productType:Ce.AGENCY,discountAllowed:!1,coupon:"BLF30",limits:{domain:250},price:{[Ye]:159},discountPrice:{[Ye]:111.3},discountRatio:.3};const De=new Map,{plan:Be}=Te;De.set(Be.FREE,Me.FREE),De.set(Be.PERSONAL_MONTHLY,{...Me.PERSONAL_MONTHLY,planId:19384}),De.set(Be.PERSONAL,{...Me.PERSONAL,planId:19385}),De.set(Be.PLAN_1,{...Me.PLAN_1,planId:9389}),De.set(Be.PLAN_2,{...Me.PLAN_2,planId:7844}),De.set(Be.PLAN_3,{...Me.PLAN_3,planId:7845}),De.set(Be.LTD_AGENCY_PRIME,{...Me.LTD_AGENCY_PRIME,planId:31936}),De.set(Be.LTD_AGENCY_NCF,{...Me.LTD_AGENCY_NCF,planId:19389}),De.set(Be.STARTER_25,{...Me.STARTER_25,planId:9387}),De.set(Be.PREMIUM_100,{...Me.PREMIUM_100,planId:9388}),De.set(Be.BUSINESS_MONTHLY,{...Me.BUSINESS_MONTHLY,planId:19388}),De.set(Be.BUSINESS_3,{planId:48465,...Me.BUSINESS_3}),De.set(Be.BUSINESS_10,{...Me.BUSINESS_10,planId:48466}),De.set(Be.BUSINESS_MONTHLY_10,{...Me.BUSINESS_MONTHLY_10,planId:65357}),De.set(Be.AGENCY_25,{...Me.AGENCY_25,planId:48467}),De.set(Be.AGENCY_100,{...Me.AGENCY_100,planId:48468}),De.set(Be.AGENCY_250,{...Me.AGENCY_250,planId:48469}),De.set(Be.AGENCY_MONTHLY_25,{...Me.AGENCY_MONTHLY_25,planId:65358}),De.set(Be.AGENCY_MONTHLY_100,{...Me.AGENCY_MONTHLY_100,planId:65359}),De.set(Be.AGENCY_MONTHLY_250,{...Me.AGENCY_MONTHLY_250,planId:65360});const ke=new Map,{plan:xe}=Te;ke.set(xe.FREE,Me.FREE),ke.set(xe.PERSONAL_MONTHLY,{...Me.PERSONAL_MONTHLY,planId:743159}),ke.set(xe.PERSONAL,{...Me.PERSONAL,planId:743160}),ke.set(xe.PLAN_1,{...Me.PLAN_1,planId:591501}),ke.set(xe.PLAN_2,{...Me.PLAN_2,planId:592743}),ke.set(xe.PLAN_3,{...Me.PLAN_3,planId:599617}),ke.set(xe.STARTER_25,{...Me.STARTER_25,planId:744473}),ke.set(xe.PREMIUM_10,{...Me.PREMIUM_10,planId:647853}),ke.set(xe.PREMIUM_25,{...Me.PREMIUM_25,planId:647857}),ke.set(xe.PREMIUM_100,{...Me.PREMIUM_100,planId:647859}),ke.set(xe.BUSINESS_MONTHLY,{...Me.BUSINESS_MONTHLY,planId:743162}),ke.set(xe.BUSINESS_3,{...Me.BUSINESS_3,planId:743161}),ke.set(xe.BUSINESS_10,{...Me.BUSINESS_10,planId:823088}),ke.set(xe.BUSINESS_MONTHLY_10,{...Me.BUSINESS_MONTHLY_10,planId:857028}),ke.set(xe.AGENCY_25,{...Me.AGENCY_25,planId:774988}),ke.set(xe.AGENCY_100,{...Me.AGENCY_100,planId:774989}),ke.set(xe.AGENCY_250,{...Me.AGENCY_250,planId:823732}),ke.set(xe.AGENCY_MONTHLY_25,{...Me.AGENCY_MONTHLY_25,planId:857029}),ke.set(xe.AGENCY_MONTHLY_100,{...Me.AGENCY_MONTHLY_100,planId:857030}),ke.set(xe.AGENCY_MONTHLY_250,{...Me.AGENCY_MONTHLY_250,planId:857031}),ke.set(xe.LTD_AGENCY_PRIME,{...Me.LTD_AGENCY_PRIME,planId:779882}),ke.set(xe.LTD_AGENCY_NCF,{...Me.LTD_AGENCY_NCF,planId:795160});const{product:je,plan:Fe}=Te,He=new Map;He.set(Fe.PERSONAL,{provider:"",plans:[Fe.PERSONAL,Fe.PERSONAL_MONTHLY],displayName:"Personal",productType:je.PERSONAL,features:[{label:"AI Site Generation (Beta)",active:!0},{label:"AI Text Generation (Beta)",active:!0},{label:"AI Image Generation (Beta)",active:!0},{label:"25 Pages",active:!0},{label:"200 Blog Posts",active:!0},{label:"0 Collaborator",active:!0},{label:"Unlimited Storage",active:!0},{label:"Unlimited Bandwidth",active:!0},{label:"5 CMS Collections",active:!0},{label:"200 Collection Items",active:!0},{active:!0,label:"Custom Fields & Collections"},{label:"Templates & UI Blocks",active:!0},{label:"3,000 Members",active:!0},{label:"Export Site",active:!1},{label:"White Label Dashboard",active:!1},{label:"Client Billing",active:!1},{label:"Agency Branding",active:!1},{label:"White Label Documentation",active:!1}]}),He.set(Fe.BUSINESS,{provider:"",plans:[Fe.BUSINESS_3,Fe.BUSINESS_10,Fe.BUSINESS_MONTHLY,Fe.BUSINESS_MONTHLY_10],displayName:"Business",productType:je.BUSINESS,features:[{label:"AI Site Generation (Beta)",active:!0},{label:"AI Text Generation (Beta)",active:!0},{label:"AI Image Generation (Beta)",active:!0},{label:"Unlimited Pages",active:!0},{label:"Unlimited Blog Posts",active:!0},{label:"10 Collaborator",active:!0},{label:"Unlimited Storage",active:!0},{label:"Unlimited Bandwidth",active:!0},{label:"Unlimited CMS Collections",active:!0},{label:"Unlimited Collection Items",active:!0},{active:!0,label:"Custom Fields & Collections"},{label:"Templates & UI Blocks",active:!0},{label:"10,000 Members",active:!0},{label:"Export Site 15 Times Per Month",active:!0},{label:"White Label Dashboard",active:!0},{label:"Client Billing",active:!1},{label:"Agency Branding",active:!1},{label:"White Label Documentation",active:!1}]}),He.set(Fe.AGENCY,{provider:"",plans:[Fe.AGENCY_25,Fe.AGENCY_100,Fe.AGENCY_250,Fe.AGENCY_MONTHLY_25,Fe.AGENCY_MONTHLY_100,Fe.AGENCY_MONTHLY_250],displayName:"Agency",productType:je.AGENCY,features:[{label:"AI Site Generation (Beta)",active:!0},{label:"AI Text Generation (Beta)",active:!0},{label:"AI Image Generation (Beta)",active:!0},{label:"Unlimited Pages",active:!0},{label:"Unlimited Blog Posts",active:!0},{label:"Unlimited Collaborator",active:!0},{label:"Unlimited Storage",active:!0},{label:"Unlimited Bandwidth",active:!0},{label:"Unlimited CMS Collections",active:!0},{label:"Unlimited Collection Items",active:!0},{active:!0,label:"Custom Fields & Collections"},{label:"Templates & UI Blocks",active:!0},{label:"Unlimted Members",active:!0},{label:"Export Site 15 Times Per Month",active:!0},{label:"White Label Dashboard",active:!0},{label:"Client Billing",active:!0},{label:"Agency Branding",active:!0},{label:"White Label Documentation",active:!0}]});const Ke=new Map;Ke.set(Fe.BUSINESS,{plans:[Fe.BUSINESS_MONTHLY,Fe.LTD_AGENCY_PRIME,Fe.LTD_AGENCY_NCF],displayName:"Business",features:He.get(Fe.BUSINESS).features||[]}),Ke.set(Fe.PERSONAL,{displayName:"Personal",plans:[Fe.PERSONAL_MONTHLY],features:He.get(Fe.PERSONAL).features||[]}),Ke.set(Te.product.FREE,{displayName:"Free",plans:[Fe.FREE],features:[{label:"\u221e Published Projects*",active:!0},{label:"Integrations",active:!0},{label:"SEO & Social Settings",active:!0},{label:"Custom CSS",active:!0},{label:"Contact Form",active:!0},{label:"Subscription Form",active:!0}]}),Ke.set(Te.product.STARTER,{displayName:"Starter",plans:[Fe.PLAN_1,Fe.PLAN_2,Fe.STARTER_25],features:[{label:"\u221e Published Projects*",active:!0},{label:"Integrations",active:!0},{label:"SEO & Social Settings",active:!0},{label:"Custom CSS",active:!0},{label:"Contact Form",active:!0},{label:"Subscription Form",active:!0},{label:"Remove Branding",active:!0},{label:"Custom Code",active:!0}]}),Ke.set(Te.product.PREMIUM,{displayName:"Premium",plans:[Fe.PLAN_3,Fe.PREMIUM_10,Fe.PREMIUM_25,Fe.PREMIUM_100],features:[{label:"\u221e Published Projects*",active:!0},{label:"Integrations",active:!0},{label:"SEO & Social Settings",active:!0},{label:"Custom CSS",active:!0},{label:"Contact Form",active:!0},{label:"Subscription Form",active:!0},{label:"Remove Branding",active:!0},{label:"Custom Code",active:!0},{label:"Custom Form",active:!0},{label:"Payment Button",active:!0},{label:"Export HTML/CSS/JS",active:!0}]});const Ze=["production","staging"].includes({VITE_AIRTABLE_API_URL:"https://rkqj7859q4.execute-api.us-east-2.amazonaws.com/Prod",VITE_SUBSCRIPTION_API_URL:"https://41f5pv771f.execute-api.us-east-2.amazonaws.com/Prod/create-contact",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_APP_STAGE),{siteTypes:{STATIC:qe},plan:{FREE:Ve,STARTER:$e,PERSONAL:We,AGENCY:ze,PLAN_1:Je,PLAN_2:Qe,PLAN_3:Xe,STARTER_25:et,AGENCY_PLUS:tt,BUSINESS_3:nt,BUSINESS_10:rt,AGENCY_25:ot,AGENCY_100:it,AGENCY_250:at,LTD_AGENCY_NCF:st,BUSINESS_MONTHLY:lt,LTD_AGENCY_PRIME:ut,PERSONAL_MONTHLY:ct,BUSINESS_MONTHLY_10:dt,AGENCY_MONTHLY_25:pt,AGENCY_MONTHLY_100:ft,AGENCY_MONTHLY_250:yt},billingType:{TWO_YEARLY:Et,FOREVER:At}}=Te,vt=Ze?ke:De,_t=(e=0)=>[...vt.values()].find((t=>t.planId===e)),ht=[Ve,Je,Qe,$e,ct,lt,dt,pt,ft,yt,We,et,nt,rt,ot,it,ze,tt,at,Xe,st,ut];Symbol.toStringTag}}]);